(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{46:function(e,t,a){e.exports=a(79)},78:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),o=a.n(c),l=a(3),s=a(16),u=a(44),i=a(7),m=a(5),p=a.n(m),d=a(14),f=a(17),E=a.n(f),g=a(39),b=a.n(g),h=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return function(n){var r=b.a.v4();n({type:"SET_ALERT",payload:{msg:e,alertType:t,id:r}}),setTimeout((function(){return n({type:"REMOVE_ALERT",payload:r})}),a)}},O=function(e){e?E.a.defaults.headers.common["x-auth-token"]=e:delete E.a.defaults.headers.common["x-auth-token"]},y=function(){return function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token&&O(localStorage.token),e.prev=1,e.next=4,E.a.get("/api/auth");case 4:a=e.sent,t({type:"USER_LOADED",payload:a.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:"AUTH_ERROR"});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},v=Object(i.b)((function(e){return{auth:e.auth}}),{logout:function(){return function(e){e({type:"LOGOUT"})}}})((function(e){var t=e.auth,a=t.isAuthenticated,c=t.loading,o=e.logout,s=r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{onClick:o,href:"#!"},r.a.createElement("i",{className:"fas fa-sign-out-alt"})," ",r.a.createElement("span",{className:"hide-sm"},"logout")))),i=r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:"#!"},"Proveedores")),r.a.createElement("li",null,r.a.createElement(l.b,{to:"/register"},"Reg\xedstrate")),r.a.createElement("li",null,r.a.createElement(l.b,{to:"/login"},"Inicia Sesi\xf3n")));return r.a.createElement("nav",{className:"navbar bg-dark"},r.a.createElement("h1",null,r.a.createElement(l.b,{to:"/"},"TogetherClick ",r.a.createElement(u.a,null))),!c&&r.a.createElement(n.Fragment,null,a?s:i))})),j=function(){return r.a.createElement("section",{className:"landing"},r.a.createElement("div",{className:"dark-overlay"},r.a.createElement("div",{className:"landing-inner"},r.a.createElement("h1",{className:"x-large"},"Together Click ",r.a.createElement("br",null)),r.a.createElement("h2",null,"El espacio incluyente donde toda la comunidad de bodas se conecta ")," ",r.a.createElement("br",null),r.a.createElement("div",{className:"buttons"},r.a.createElement(l.b,{to:"/register",className:"btn btn-primary"},"Reg\xedstrate"),r.a.createElement(l.b,{to:"/login",className:"btn btn-light"},"Inicia Sesi\xf3n")))))},w=a(15),S=a(21);function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var k=Object(i.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{setAlert:h,register:function(e){var t=e.name,a=e.email,n=e.password;return function(){var e=Object(d.a)(p.a.mark((function e(r){var c,o,l,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={headers:{"Content-Type":"application/json"}},o=JSON.stringify({name:t,email:a,password:n}),e.prev=2,e.next=5,E.a.post("/api/users",o,c);case 5:l=e.sent,r({type:"REGISTER_SUCCESS",payload:l.data}),r(y()),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),(s=e.t0.response.data.errors)&&s.forEach((function(e){return r(h(e.msg,"danger"))})),r({type:"REGISTER_FAIL"});case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.setAlert,a=e.register,c=e.isAuthenticated,o=Object(n.useState)({name:"",email:"",password:"",password2:""}),u=Object(S.a)(o,2),i=u[0],m=u[1],f=i.name,E=i.email,g=i.password,b=i.password2,h=function(e){return m(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(a,!0).forEach((function(t){Object(w.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},i,Object(w.a)({},e.target.name,e.target.value)))},O=function(){var e=Object(d.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),g!==b?t("La contrase\xf1a no coincide","danger"):a({name:f,email:E,password:g});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c?r.a.createElement(s.a,{to:"/dashboard"}):r.a.createElement(n.Fragment,null,r.a.createElement("h1",{className:"large text-primary"},"Reg\xedstrate"),r.a.createElement("p",{className:"lead"},"Crea Tu Cuenta"),r.a.createElement("form",{className:"form",onSubmit:function(e){return O(e)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",placeholder:"Name",name:"name",value:f,onChange:function(e){return h(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",placeholder:"Email address",name:"email",value:E,onChange:function(e){return h(e)}}),r.a.createElement("small",{className:"form-text"},"Puedes usar tu foto de email")),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",placeholder:"password",name:"password",value:g,onChange:function(e){return h(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",placeholder:"Confirm Password",name:"password2",value:b,onChange:function(e){return h(e)}})),r.a.createElement("input",{type:"submit",class:"btn btn-primary",value:"Register"})),r.a.createElement("p",{className:"my-1"},"\xbfYa tienes una cuenta? ",r.a.createElement(l.b,{to:"/login"},"Inicia Sesi\xf3n")))}));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var A=Object(i.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{login:function(e,t){return function(){var a=Object(d.a)(p.a.mark((function a(n){var r,c,o,l;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r={headers:{"Content-Type":"application/json"}},c=JSON.stringify({email:e,password:t}),a.prev=2,a.next=5,E.a.post("/api/auth",c,r);case 5:o=a.sent,n({type:"LOGIN_SUCCESS",payload:o.data}),n(y()),a.next=15;break;case 10:a.prev=10,a.t0=a.catch(2),(l=a.t0.response.data.errors)&&l.forEach((function(e){return n(h(e.msg,"danger"))})),n({type:"LOGIN_FAIL"});case 15:case"end":return a.stop()}}),a,null,[[2,10]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.login,a=e.isAuthenticated,c=Object(n.useState)({email:"",password:""}),o=Object(S.a)(c,2),u=o[0],i=o[1],m=u.email,f=u.password,E=function(e){return i(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(a,!0).forEach((function(t){Object(w.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},u,Object(w.a)({},e.target.name,e.target.value)))},g=function(){var e=Object(d.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),t(m,f);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a?r.a.createElement(s.a,{to:"/dashboard"}):r.a.createElement(n.Fragment,null,r.a.createElement("h1",{className:"large text-primary"},"Inicia Sesi\xf3n"),r.a.createElement("p",{className:"lead"},"Ingresa a tu Cuenta"),r.a.createElement("form",{className:"form",onSubmit:function(e){return g(e)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",placeholder:"Email address",name:"email",value:m,onChange:function(e){return E(e)},required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",placeholder:"password",name:"password",value:f,onChange:function(e){return E(e)},minLength:"6"})),r.a.createElement("input",{type:"submit",class:"btn btn-primary",value:"Login"})),r.a.createElement("p",{className:"my-1"},"\xbfA\xfan no tienes una cuenta? ",r.a.createElement(l.b,{to:"/register"},"Reg\xedstrate")))})),P=Object(i.b)((function(e){return{alerts:e.alert}}))((function(e){var t=e.alerts;return null!==t&&t.length>0&&t.map((function(e){return r.a.createElement("div",{key:e.id,className:"alert alert-".concat(e.alertType)},e.msg)}))})),x=function(e){return r.a.createElement("div",null,r.a.createElement("p",null,"Dashboard"))},C=a(41),T=Object(i.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,a=e.auth,n=a.isAuthenticated,c=a.loading,o=Object(C.a)(e,["component","auth"]);return r.a.createElement(s.b,Object.assign({},o,{render:function(e){return n||c?r.a.createElement(t,e):r.a.createElement(s.a,{to:"/login"})}}))})),I=a(13),D=a(42),L=a(43),_=a(45),G=[];function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(a,!0).forEach((function(t){Object(w.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var J={token:localStorage.getItem("token"),isAuthenticated:null,loading:!0,user:null},M=Object(I.combineReducers)({alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_ALERT":return[].concat(Object(_.a)(e),[n]);case"REMOVE_ALERT":return e.filter((function(e){return e.id!==n}));default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"USER_LOADED":return F({},e,{isAuthenticated:!0,loading:!1,user:n});case"REGISTER_SUCCESS":case"LOGIN_SUCCESS":return localStorage.setItem("token",n.token),F({},e,{},n,{isAuthenticated:!0,loading:!1});case"REGISTER_FAIL":case"AUTH_ERROR":case"LOGIN_FAIL":case"LOGOUT":return localStorage.removeItem("token"),F({},e,{token:null,isAuthenticated:!1,loading:!1});default:return e}}}),H=[L.a],V=Object(I.createStore)(M,{},Object(D.composeWithDevTools)(I.applyMiddleware.apply(void 0,H)));a(78);localStorage.token&&O(localStorage.token);var q=function(){return Object(n.useEffect)((function(){V.dispatch(y())}),[]),r.a.createElement(i.a,{store:V},r.a.createElement(l.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(v,null),r.a.createElement(s.b,{exact:!0,path:"/",component:j}),r.a.createElement("section",{className:"container"},r.a.createElement(P,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/register",component:k}),r.a.createElement(s.b,{exact:!0,path:"/login",component:A}),r.a.createElement(T,{exact:!0,path:"/dashboard",component:x}))))))};o.a.render(r.a.createElement(q,null),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.f91df605.chunk.js.map